TortoiseSVN：针对Windows平台的Subversion客户端
---

> 版本控制是管理信息修改的艺术。

> 要记住Subversion可以控制所有类型的文件，它并没有限制只为程序员工作。

#### 一、基本原理及概念 ####

* **版本库**：Subversion使用集中的数据库，它包含了所有的版本控制文件及其完整历史。这个数据库就是版本库。版本库通常位于运行Subversion服务器的文件服务器上，向Subversion客户端(例如TortoiseSVN)提供需要的数据。如果只备份一个东西，请备份服务器上的版本库，因为它是你数据的主副本。一个典型的Subversion的版本库经常包含许多项目的文件(或者说源代码),通常每一个项目都是版本库的子目录,在这种架构下,一个用户的工作副本往往对应版本库的的一个子目录。

* **工作副本**：这是实际工作的地方。每一个开发者在自己的电脑上都有属于自己的工作副本，有时可以将其理解为沙箱。你可以将最新的版本从版本库上取下来，在本地的副本上工作而不影响其他人，如果对更改满意就可以将其提交到版本库中。你的工作副本是你的私有工作区,在你明确的做了特定操作之前,Subversion不会把你的修改与其他人的合并,也不会把你的修改展示给别人。当对工作副本中的文件做了一些更改并确认他们能够正常工作后,Subversion提供将这些更改公布给同项目的其他人员的命令(通过写入版本库)。如果其他人公布他们的更改,Subversion提供将这些更改合并到工作副本的命令(通过读取本版本库)。


* **锁定-修改-解锁方案**：许多版本控系统使用 锁定-修改-解锁 模型来解决多人协作的问题，这是一个简单的解决方案。在这种系统中，在同一时间版本库只允许一个用户修改一个文件。
* **复制-修改-合并方案**：复制-修改-合并模型感觉是有一点混乱，但在实践中，通常运行的很平稳，用户可以并行的工作，不必等待别人，当工作在同一个文件上时，也很少会有重叠发生，冲突并不频繁，处理冲突的时间远比等待解锁花费的时间少。

> **有一种情况下锁定-修改-解锁模型会更好，也就是你有不可合并的文件，例如你的版本库包含了图片，两个人同时编辑这个文件，没有办法将这两个修改合并。**

> Subversion默认使用复制-修改-合并模型，大多数情况下可以满足你的需求。然而，**Subversion1.2后还是支持锁定**，如果你有不可合并的文件，或者你只是想实行强制管理策略，Subversion仍然会提供你需要的特性。

#### 二、常见问题及注意事项 ####
* 在版本库中,每次提交被当作一次原子事务操作:要么所有的改变发生,要么都不发生,Subversion努力保持原子性以应对程序错误、系统错误、网络问题和其他用户行为。

* 每当版本库接受了一个提交,文件系统进入了一个新的状态,叫做版本,每个版本被赋予一个独一无二的自然数,一个比一个大，叫做修订号。

* 工作副本并不一定对应版本库中的单一版本,工作副本中可能包含多个版本的文件。但是你在工作副本顶级目录作一次干净的更新,会使所有内容对应版本库的同一修订版本。
 
* 工作副本怎样跟踪版本库?
	1. what revision your working file is based on (this is called the file's working revision)
	2. 一个本地副本最后更新的时间戳。
* 给定这些信息,通过与版本库通讯,Subversion 可以告诉我们工作副本是处于如下四种状态的哪一种:
    1. 未修改且是当前的
        
		工作副本没有修改,在工作副本当前版本之后没有修改提交到版本库。svn commit 操作不做任何事情,svn update 不做任何事情。
    2. 本地已修改且是当前的
        
		工作副本已经修改,从基准版本(工作副本未修改之前的版本号)之后没有修改提交到版本库。本地修改没有提交,因此 commit会成功的提交,update 不做任何事情。
    3. 本地未修改且过时
        
		工作副本没有修改,但在版本库中已经修改了。这个文件应当更新到最新公共版本。commit不做任何事情,update将会更新工作副本到最新的版。
    4. 本地已修改且过时
        
		工作副本和版本库中都被修改了。提交该文件将会因为过时而失败。该文件应该先更新; 更新命令将会尝试合并公共更改和本机更改。如果 Subversion不能顺利的自动完成合并,则需要用户解决冲突。

* 绿色的图标表示文件未被修改，和版本库中的文件版本一致。



#### 三、常用技巧及实践总结 ####
* F5 刷新当前视图。

* revert：撤销；复原

* 无论你使用何种版本库,定期维护和备份版本库非常重要,或许你可以访问最近版本的文件,但是如果没有版本库,所有的历史版本信息将会丢失。
 
* 如果你独自工作,且没有服务器,或者只是想在独立的环境下学习 Subversion 和 TortoiseSVN,那么本地版本库可能是你最好的选择。
        
* 创建版本库命令：**svnadmin create MyRepository**
 
* 有一些标准的,推荐使用的组织版本库结构的方法。如果一个版本库只管理一个项目,那么大多数人创建一个 trunk 目录作为开发的"主干",一个 branches 目录作为分支,以及一个 tags 目录作为标记。如果版本库管理多个项目（shop、blog），则推荐的组织版本库结构的方法如下：
    
	/shop/trunk

    /shop/branches

    /shop/tags

    /blog/trunk

    /blog/branches

    /blog/tags

* **隔一段时间要自觉更新工作副本（或者写一个脚本定时更新），这样能保证你的工作副本代码是最新的。**

* **提交日志最好每次都要填写，这样可以方便其他成员快速了解你的提交主要是解决什么问题或完成了什么功能。**

* **提交时要比较做了哪些修改，避免提交了不必要的文件或不必要的修改。**



